extern fn printf(str: i8*, ...): void;

fn iter_foo(): impl generator<i32, i32, i32> {
    for (let i = 0; i < 5; i += 1)
    {
        printf("before %d\n", i);
        let recved = yield i;
        printf("recved %d\n", recved);
    }

    return 3;
}

fn main(): i32 
{
    let frame = iter_foo();

    let test = iter_foo_send(&frame);

    while (!test.done)
    {
        printf("%d\n", test.value);
        test = iter_foo_send(&frame);
    }

    return 1;
}